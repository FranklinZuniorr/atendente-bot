{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/helpers/react-query.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useInfiniteQuery, useMutation, useQuery } from '@tanstack/react-query';\nimport type {\n  UseMutationOptions,\n  UseQueryOptions,\n  DefinedInitialDataInfiniteOptions,\n} from '@tanstack/react-query';\n\nexport const generateReactQuery = <TReturnData, TFilter>(\n  queryKey: string,\n  fn: (filter: TFilter) => Promise<TReturnData>,\n) => {\n  return (\n    params: TFilter,\n    options?: Omit<UseQueryOptions<TReturnData, Error, TReturnData, [string, TFilter]>, 'queryKey' | 'queryFn'>,\n  ) => {\n    return useQuery<TReturnData, Error, TReturnData, [string, TFilter]>({\n      ...options,\n      queryKey: [queryKey, params],\n      queryFn: () => fn(params),\n    });\n  };\n};\n\nexport const generateReactQueryMutation = <TReturnData = void, TFilter = void>(\n  queryKey: string,\n  fn: (filter: TFilter) => Promise<TReturnData> | void,\n) => {\n  return (\n    options?: Omit<UseMutationOptions<TReturnData, Error, TFilter>, 'mutationKey' | 'mutationFn'>,\n  ) => {\n    return useMutation<TReturnData, Error, TFilter>({\n      ...options,\n      mutationKey: [queryKey],\n      mutationFn: (event: TFilter) => fn(event) as Promise<TReturnData>,\n    });\n  };\n};\n\nexport const generateReactQueryInfinityScroll = <\n  TReturnData = void,\n  TFilter = void,\n  TReactQueryPageParam = any\n>(\n    queryKey: string,\n    fn: (\n    filter: TFilter,\n    reactQueryPageParam: TReactQueryPageParam,\n  ) => Promise<TReturnData>,\n  ) => {\n  return (\n    params: TFilter,\n    options?: Omit<\n      DefinedInitialDataInfiniteOptions<TReturnData, Error, TReturnData, [string, TFilter]>,\n      'queryKey' | 'queryFn'\n    >,\n  ) => {\n    return useInfiniteQuery<TReturnData, Error, TReturnData, [string, TFilter]>({\n      ...options,\n      queryKey: [queryKey, params],\n      queryFn: ({ pageParam }) => {\n        const normalizedPageParam: TReactQueryPageParam = pageParam as TReactQueryPageParam;\n        return fn(params, normalizedPageParam);\n      },\n      initialPageParam: undefined,\n      getNextPageParam: () => null,\n    });\n  };\n};"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AACrD;AAAA;AAAA;;AAOO,MAAM,qBAAqB,CAChC,UACA;;IAEA,UAAO,CACL,QACA;;QAEA,OAAO,CAAA,GAAA,8KAAA,CAAA,WAAQ,AAAD,EAAsD;YAClE,GAAG,OAAO;YACV,UAAU;gBAAC;gBAAU;aAAO;YAC5B,OAAO;+CAAE,IAAM,GAAG;;QACpB;IACF;;YALS,8KAAA,CAAA,WAAQ;;;AAMnB;AAEO,MAAM,6BAA6B,CACxC,UACA;;IAEA,UAAO,CACL;;QAEA,OAAO,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAA+B;YAC9C,GAAG,OAAO;YACV,aAAa;gBAAC;aAAS;YACvB,UAAU;0DAAE,CAAC,QAAmB,GAAG;;QACrC;IACF;;YALS,iLAAA,CAAA,cAAW;;;AAMtB;AAEO,MAAM,mCAAmC,CAK5C,UACA;;IAKF,UAAO,CACL,QACA;;QAKA,OAAO,CAAA,GAAA,sLAAA,CAAA,mBAAgB,AAAD,EAAsD;YAC1E,GAAG,OAAO;YACV,UAAU;gBAAC;gBAAU;aAAO;YAC5B,OAAO;qEAAE,CAAC,EAAE,SAAS,EAAE;oBACrB,MAAM,sBAA4C;oBAClD,OAAO,GAAG,QAAQ;gBACpB;;YACA,kBAAkB;YAClB,gBAAgB;qEAAE,IAAM;;QAC1B;IACF;;YAVS,sLAAA,CAAA,mBAAgB;;;AAW3B","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/query-api/get-messages-history.ts"],"sourcesContent":["import { HttpClientApi } from '@/app/configs/axios';\nimport { queryClient } from '@/app/configs/react-query';\nimport { generateReactQuery } from '@/app/helpers/react-query';\n\nexport const KEY_GET_MESSAGES_HISTORY = 'KEY_GET_MESSAGES_HISTORY';\n\ninterface GetMessagesHistoryReturn {\n    data: {\n        user: string;\n        receivedMessage: string;\n        replyMessage: string;\n        createdAt: string;\n        userTelephone: string;\n    }[]\n}\n\nexport const invalidateGetMessagesHistory = (clientId: string) => {\n  if (clientId) {\n    queryClient.invalidateQueries({ queryKey: [KEY_GET_MESSAGES_HISTORY, clientId] });\n  } else {\n    queryClient.invalidateQueries({ queryKey: [KEY_GET_MESSAGES_HISTORY] });\n  }\n};\n\nconst getMessagesHistory = async (clientId: string): Promise<GetMessagesHistoryReturn> => {\n  const path: string = `api/client/messages-history/${clientId}`;\n\n  try {\n    const response: GetMessagesHistoryReturn = (await HttpClientApi.get(path)).data;\n\n    return response;\n  } catch {\n    throw new Error(path);\n  }\n};\n\nexport const useGetMessagesHistory = generateReactQuery<GetMessagesHistoryReturn, string>(KEY_GET_MESSAGES_HISTORY, getMessagesHistory);"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,2BAA2B;AAYjC,MAAM,+BAA+B,CAAC;IAC3C,IAAI,UAAU;QACZ,mJAAA,CAAA,cAAW,CAAC,iBAAiB,CAAC;YAAE,UAAU;gBAAC;gBAA0B;aAAS;QAAC;IACjF,OAAO;QACL,mJAAA,CAAA,cAAW,CAAC,iBAAiB,CAAC;YAAE,UAAU;gBAAC;aAAyB;QAAC;IACvE;AACF;AAEA,MAAM,qBAAqB,OAAO;IAChC,MAAM,OAAe,CAAC,4BAA4B,EAAE,UAAU;IAE9D,IAAI;QACF,MAAM,WAAqC,CAAC,MAAM,0IAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI;QAE/E,OAAO;IACT,EAAE,OAAM;QACN,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,MAAM,wBAAwB,CAAA,GAAA,0IAAA,CAAA,qBAAkB,AAAD,EAAoC,0BAA0B","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/assets/images/chat-logo-social-social-media-whatsapp.svg.mjs%20%28structured%20image%20object%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 512, height: 512, blurDataURL: null, blurWidth: 0, blurHeight: 0 }\n"],"names":[],"mappings":";;;AAAA;;uCACe;IAAE,KAAA,gLAAA,CAAA,UAAG;IAAE,OAAO;IAAK,QAAQ;IAAK,aAAa;IAAM,WAAW;IAAG,YAAY;AAAE","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/card-message/card-message.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport ZapIcon from '../../../assets/images/chat-logo-social-social-media-whatsapp.svg';\nimport Image from 'next/image';\n\ninterface Message {\n    user: string;\n    userTelephone: string;\n    receivedMessage: string;\n    replyMessage: string;\n    createdAt: string;\n}\n\ninterface CardMessageProps {\n    message: Message;\n}\n\nexport const CardMessage = ({ \n  message\n}: CardMessageProps) => {\n  const stylesDivMessage = 'w-full flex';\n\n  const handleOpenUseZap = () => {\n    const link = `https://api.whatsapp.com/send?phone=${message.userTelephone}`;\n\n    window.open(link, '_blank');\n  };\n\n  return <div className={`\n    relative flex flex-col w-full h-fit border border-primaryLow rounded-md p-4 overflow-hidden\n  `}>\n    <div className='absolute right-0 top-0 p-2 bg-primaryLow rounded-bl-lg text-[12px]'>\n      {dayjs(message.createdAt).format('DD/MM/YYYY HH:mm')}\n    </div>\n    <Image \n      className='w-6 h-6 absolute right-[110px] top-1 cursor-pointer' \n      src={ZapIcon} alt='zap-icon' \n      onClick={handleOpenUseZap}\n    />\n    <div className={`${stylesDivMessage} justify-start`}>\n      <div className=\"flex flex-col gap-1.5 w-fit rounded-lg max-w-[50%] max-md:max-w-[100%]\">\n        <strong>{message.user}</strong>\n        <div className='p-2 bg-gray-200 rounded-lg w-fit whitespace-pre-line'>{message.receivedMessage.replace(`${message.user}:`, '')}</div>\n      </div>\n    </div>\n    <div className={`${stylesDivMessage} justify-end`}>\n      <div className=\"flex flex-col gap-1.5 w-fit items-end text-right max-w-[50%] max-md:max-w-[100%]\">\n        <strong>Resposta da IA</strong>\n        <div className='p-2 rounded-lg bg-gray-200 w-fit whitespace-pre-line'>{message.replyMessage}</div>\n      </div>\n    </div>\n  </div>;\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAcO,MAAM,cAAc,CAAC,EAC1B,OAAO,EACU;IACjB,MAAM,mBAAmB;IAEzB,MAAM,mBAAmB;QACvB,MAAM,OAAO,CAAC,oCAAoC,EAAE,QAAQ,aAAa,EAAE;QAE3E,OAAO,IAAI,CAAC,MAAM;IACpB;IAEA,qBAAO,6LAAC;QAAI,WAAW,CAAC;;EAExB,CAAC;;0BACC,6LAAC;gBAAI,WAAU;0BACZ,CAAA,GAAA,wIAAA,CAAA,UAAK,AAAD,EAAE,QAAQ,SAAS,EAAE,MAAM,CAAC;;;;;;0BAEnC,6LAAC,gIAAA,CAAA,UAAK;gBACJ,WAAU;gBACV,KAAK,iZAAA,CAAA,UAAO;gBAAE,KAAI;gBAClB,SAAS;;;;;;0BAEX,6LAAC;gBAAI,WAAW,GAAG,iBAAiB,cAAc,CAAC;0BACjD,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAQ,QAAQ,IAAI;;;;;;sCACrB,6LAAC;4BAAI,WAAU;sCAAwD,QAAQ,eAAe,CAAC,OAAO,CAAC,GAAG,QAAQ,IAAI,CAAC,CAAC,CAAC,EAAE;;;;;;;;;;;;;;;;;0BAG/H,6LAAC;gBAAI,WAAW,GAAG,iBAAiB,YAAY,CAAC;0BAC/C,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAO;;;;;;sCACR,6LAAC;4BAAI,WAAU;sCAAwD,QAAQ,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAInG;KAnCa","debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/header-users/header-users.tsx"],"sourcesContent":["'use client';\n\nexport interface HeaderUsersElement {\n  name: string;\n  telephone: string\n}\n\ninterface HeaderUsersProps {\n    users: HeaderUsersElement[];\n    selectedUserTelephone: string;\n    onChange:  (user: string) => void\n}\n\nexport const HeaderUsers = ({ users, selectedUserTelephone, onChange }: HeaderUsersProps) => {\n\n  const handleOnChange = (user: string) => {\n    if (selectedUserTelephone === user) {\n      onChange('');\n      return;\n    };\n\n    onChange(user);\n  };\n\n  return users.length > 0 ? <div className=\"w-full flex flex-col gap-1\">\n    <span className=\"text-gray-500\">Filtro por usu√°rios:</span>\n    <div className='w-full bg-gray-200 px-2 py-2 rounded-md min-h-fit gap-2 flex overflow-x-auto'>\n      {\n        users.map(user => \n          <div \n            key={user.telephone} \n            className={\n              `\n                ${selectedUserTelephone === user.telephone ? 'border border-primary bg-primaryLow' : ''} \n                cursor-pointer text-[0.875rem] bg-gray-300 p-1 px-2 rounded-md text-gray-800\n              `\n            }\n            onClick={() => handleOnChange(user.telephone)}\n          >\n            {user.name}\n            <div className=\"text-[10px] text-gray-500\">{user.telephone}</div>\n          </div>\n        )\n      }\n    </div> \n  </div> : null;\n};"],"names":[],"mappings":";;;;AAAA;;AAaO,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE,qBAAqB,EAAE,QAAQ,EAAoB;IAEtF,MAAM,iBAAiB,CAAC;QACtB,IAAI,0BAA0B,MAAM;YAClC,SAAS;YACT;QACF;;QAEA,SAAS;IACX;IAEA,OAAO,MAAM,MAAM,GAAG,kBAAI,6LAAC;QAAI,WAAU;;0BACvC,6LAAC;gBAAK,WAAU;0BAAgB;;;;;;0BAChC,6LAAC;gBAAI,WAAU;0BAEX,MAAM,GAAG,CAAC,CAAA,qBACR,6LAAC;wBAEC,WACE,CAAC;gBACC,EAAE,0BAA0B,KAAK,SAAS,GAAG,wCAAwC,GAAG;;cAE1F,CAAC;wBAEH,SAAS,IAAM,eAAe,KAAK,SAAS;;4BAE3C,KAAK,IAAI;0CACV,6LAAC;gCAAI,WAAU;0CAA6B,KAAK,SAAS;;;;;;;uBAVrD,KAAK,SAAS;;;;;;;;;;;;;;;eAepB;AACX;KAjCa","debugId":null}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 400, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/content-msgs/content-msgs.tsx"],"sourcesContent":["'use client';\n\nimport { useAppSelector } from '@/app/configs/redux/store';\nimport { useGetMessagesHistory } from '../../query-api/get-messages-history';\nimport { CardMessage } from '../card-message';\nimport { Alert, Skeleton } from 'antd';\nimport { HeaderUsers } from '../header-users';\nimport { useState } from 'react';\nimport { HeaderUsersElement } from '../header-users/header-users';\n\nexport const ContentMsgs = () => {\n  const client = useAppSelector(state => state.client);\n  const [selectedUserTelephoneFilter, setSelectedUserTelephoneFilter] = \n  useState<string>('');\n\n  const { \n    data: dataGetMessagesHistory, \n    isFetching: isFetchingGetMessagesHistory,\n    isError: isErrorGetMessagesHistory\n  } = \n  useGetMessagesHistory(client.id, {\n    retry: 2,\n    refetchOnWindowFocus: true,\n    refetchInterval: 1000 * 60\n  });\n\n  const normalizedDataGetMessagesHistory = selectedUserTelephoneFilter ? \n    dataGetMessagesHistory?.data.filter(message => message.userTelephone === selectedUserTelephoneFilter) || [] : \n    dataGetMessagesHistory?.data || [];\n  const reversedMessages = [...normalizedDataGetMessagesHistory].reverse();\n\n  const allUsersMap = new Map<string, HeaderUsersElement>();\n  normalizedDataGetMessagesHistory.forEach(message => {\n    const key = `${message.user}-${message.userTelephone}`;\n    allUsersMap.set(key, { name: message.user, telephone: message.userTelephone });\n  });\n  const allUsers = Array.from(allUsersMap.values());\n\n  return <div className=\"flex flex-col gap-4 w-full shadow-lg p-2 rounded-b-md\">\n    <HeaderUsers \n      users={[...allUsers]} \n      selectedUserTelephone={selectedUserTelephoneFilter} \n      onChange={user => setSelectedUserTelephoneFilter(user)}\n    />\n    <div>\n      Total de mensagens: {dataGetMessagesHistory?.data.length || 0}\n    </div>\n    {\n      isFetchingGetMessagesHistory ? <Skeleton /> :\n        <>\n          {\n            isErrorGetMessagesHistory ? \n              <Alert className='max-w-[20rem]' message=\"Nenhuma mensagem encontrada!\" type=\"error\" /> :\n              <>\n                {\n                  reversedMessages.map((message, index) => (\n                    <CardMessage key={index} message={message} />\n                  ))\n                }\n              </>\n          }\n        </>\n    }\n  </div>;\n};"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;AAPA;;;;;;;AAUO,MAAM,cAAc;;IACzB,MAAM,SAAS,CAAA,GAAA,0IAAA,CAAA,iBAAc,AAAD;8CAAE,CAAA,QAAS,MAAM,MAAM;;IACnD,MAAM,CAAC,6BAA6B,+BAA+B,GACnE,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAEjB,MAAM,EACJ,MAAM,sBAAsB,EAC5B,YAAY,4BAA4B,EACxC,SAAS,yBAAyB,EACnC,GACD,CAAA,GAAA,mKAAA,CAAA,wBAAqB,AAAD,EAAE,OAAO,EAAE,EAAE;QAC/B,OAAO;QACP,sBAAsB;QACtB,iBAAiB,OAAO;IAC1B;IAEA,MAAM,mCAAmC,8BACvC,wBAAwB,KAAK,OAAO,CAAA,UAAW,QAAQ,aAAa,KAAK,gCAAgC,EAAE,GAC3G,wBAAwB,QAAQ,EAAE;IACpC,MAAM,mBAAmB;WAAI;KAAiC,CAAC,OAAO;IAEtE,MAAM,cAAc,IAAI;IACxB,iCAAiC,OAAO,CAAC,CAAA;QACvC,MAAM,MAAM,GAAG,QAAQ,IAAI,CAAC,CAAC,EAAE,QAAQ,aAAa,EAAE;QACtD,YAAY,GAAG,CAAC,KAAK;YAAE,MAAM,QAAQ,IAAI;YAAE,WAAW,QAAQ,aAAa;QAAC;IAC9E;IACA,MAAM,WAAW,MAAM,IAAI,CAAC,YAAY,MAAM;IAE9C,qBAAO,6LAAC;QAAI,WAAU;;0BACpB,6LAAC,0KAAA,CAAA,cAAW;gBACV,OAAO;uBAAI;iBAAS;gBACpB,uBAAuB;gBACvB,UAAU,CAAA,OAAQ,+BAA+B;;;;;;0BAEnD,6LAAC;;oBAAI;oBACkB,wBAAwB,KAAK,UAAU;;;;;;;YAG5D,6CAA+B,6LAAC,yLAAA,CAAA,WAAQ;;;;qCACtC;0BAEI,0CACE,6LAAC,mLAAA,CAAA,QAAK;oBAAC,WAAU;oBAAgB,SAAQ;oBAA+B,MAAK;;;;;yCAC7E;8BAEI,iBAAiB,GAAG,CAAC,CAAC,SAAS,sBAC7B,6LAAC,0KAAA,CAAA,cAAW;4BAAa,SAAS;2BAAhB;;;;;;;;;;;;;AAQtC;GAtDa;;QACI,0IAAA,CAAA,iBAAc;QAS7B,mKAAA,CAAA,wBAAqB;;;KAVV","debugId":null}}]
}