(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{458:(e,r,s)=>{"use strict";s.d(r,{HG:()=>a,Vm:()=>i,lm:()=>n});var t=s(9509);t.env.EVOLUTION_BASE_URL,t.env.EVOLUTION_API_KEY,t.env.MONGO_URL,t.env.WEBHOOK_SEND_MESSAGE_URL,t.env.OPEN_AI_BASE_URL,t.env.OPEN_AI_API_KEY,t.env.STRIPE_CALLBACK_URL,t.env.STRIPE_API_COMPLETE_KEY,t.env.STRIPE_PRICE_KEY;let a="AUTH_CODE_LOCAL_STORAGE_KEY",i="TELEPHONE_LOCAL_STORAGE_KEY",n={main:"#009CFF",mainLow:"#9DD9FF",red:"#FF0000"}},805:(e,r,s)=>{"use strict";s.d(r,{FB:()=>i,iG:()=>n});var t=s(9373),a=s(5041);let i=(e,r)=>(s,a)=>(0,t.I)({...a,queryKey:[e,s],queryFn:()=>r(s)}),n=(e,r)=>s=>(0,a.n)({...s,mutationKey:[e],mutationFn:e=>r(e)})},1390:(e,r,s)=>{"use strict";s.d(r,{Y:()=>l,n:()=>n});var t=s(458),a=s(3464),i=s(3568);let n=(e,r)=>{l.defaults.headers.common={authCode:e,telephone:r}},l=a.A.create(),o=async e=>{let{status:r}=e,s=r>=200&&r<=299;if(!s)return i.Ay.error(e.data.message||"Erro na solicita\xe7\xe3o!"),Promise.reject(!1);if(s){let r=new Set(["api/payment"]);"get"===e.config.method||r.has(e.config.url)||i.Ay.success(e.data.message||"Solicita\xe7\xe3o conclu\xedda!")}return e},c=async e=>{if(e.response){var r;let s=e.response.data.message;return(null===(r=e.config)||void 0===r?void 0:r.method)!=="get"&&i.Ay.error(s||"Erro na solicita\xe7\xe3o!"),403===e.status&&(localStorage.removeItem(t.HG),localStorage.removeItem(t.Vm),window.location.reload()),Promise.reject(e)}return i.Ay.error("".concat(e.code,": ").concat(e.message)),Promise.reject(e)};l.interceptors.response.use(o,c)},4637:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>Y});var t=s(5155),a=s(802),i=s(5108),n=s(5841),l=s(9648),o=s(1390),c=s(9622),d=s(805);let m="KEY_GET_ALL_INFOS",u=e=>{e?c.q.invalidateQueries({queryKey:[m,e]}):c.q.invalidateQueries({queryKey:[m]})},x=async e=>{let r="api/info/all-by-client";try{return(await o.Y.get(r,{params:{clientId:e}})).data.data}catch(e){throw Error(r)}},p=(0,d.FB)(m,x);var h=s(2177),j=s(7129),y=s(2461),f=s(6899),E=s(9842),g=s(9122),A=s(7497),_=s(6170);let v=async e=>{let r="api/info";try{await o.Y.delete(r,{data:e})}catch(e){throw Error(r)}},N=(0,d.iG)("KEY_DELETE_INFO",v),I=async e=>{let r="api/info";try{await o.Y.put(r,e)}catch(e){throw Error(r)}},O=(0,d.iG)("KEY_PUT_INFO",I),T=e=>{let{description:r,title:s,id:a}=e,i=(0,j.Ik)({title:(0,j.Yj)().required("O t\xedtulo \xe9 obrigat\xf3rio!").min(3,"Insira no m\xednimo 3 letras"),description:(0,j.Yj)().required("A descri\xe7\xe3o \xe9 obrigat\xf3ria!").min(3,"Insira no m\xednimo 3 letras")}),{handleSubmit:l,control:o,formState:{isDirty:c}}=(0,h.mN)({resolver:(0,y.t)(i),defaultValues:{description:r,title:s}}),{mutate:d,isPending:m}=N({onSuccess:()=>u()}),{mutate:x,isPending:p}=O({onSuccess:()=>u()});return(0,t.jsx)(f.A,{size:"small",items:[{key:"1",label:s,children:(0,t.jsxs)("form",{onSubmit:l(e=>{x({infoId:a,...e})}),className:"flex flex-col gap-2 p-1.5 border-gray-300 border rounded-md",children:[(0,t.jsxs)("label",{children:["T\xedtulo: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(h.xI,{name:"title",control:o,render:e=>{let{field:r,fieldState:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.A,{...r}),s.error&&(0,t.jsx)(g.A.Text,{type:"danger",children:s.error.message})]})}}),(0,t.jsxs)("label",{children:["Descri\xe7\xe3o: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(h.xI,{name:"description",control:o,render:e=>{let{field:r,fieldState:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.A,{...r}),s.error&&(0,t.jsx)(g.A.Text,{type:"danger",children:s.error.message})]})}}),(0,t.jsxs)("div",{className:"w-full flex justify-end gap-2",children:[(0,t.jsx)(n.Ay,{disabled:!c,htmlType:"submit",variant:"solid",color:"primary",type:"primary",loading:p,children:"Editar"}),(0,t.jsx)(n.Ay,{variant:"solid",htmlType:"button",color:"red",shape:"circle",icon:(0,t.jsx)(_.A,{}),loading:m,onClick:()=>{d({infoId:a})}})]})]})}]})};var b=s(6996),w=s(2115),S=s(76);let P=async e=>{let r="api/info";try{await o.Y.post(r,e)}catch(e){throw Error(r)}},L=(0,d.iG)("KEY_POST_NEW_INFO",P),F=e=>{let{isOpen:r,setIsOpen:s}=e,a=(0,l.GV)(e=>e.client),i=(0,j.Ik)({title:(0,j.Yj)().required("O t\xedtulo \xe9 obrigat\xf3rio!").min(3,"Insira no m\xednimo 3 letras"),description:(0,j.Yj)().required("A descri\xe7\xe3o \xe9 obrigat\xf3ria!").min(3,"Insira no m\xednimo 3 letras")}),{handleSubmit:o,control:c,reset:d}=(0,h.mN)({resolver:(0,y.t)(i),defaultValues:{description:"",title:""}}),{mutate:m,isPending:x}=L({onSuccess:()=>{u(),s(!1),d()}});return(0,t.jsx)(S.A,{title:"Nova info",okButtonProps:{hidden:!0},cancelButtonProps:{hidden:!0},open:r,onCancel:()=>s(!1),children:(0,t.jsxs)("form",{onSubmit:o(e=>{m({clientId:a.id,...e})}),className:"flex flex-col gap-2",children:[(0,t.jsxs)("label",{children:["T\xedtulo: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(h.xI,{name:"title",control:c,render:e=>{let{field:r,fieldState:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.A,{...r,placeholder:"Lista de produtos"}),s.error&&(0,t.jsx)(g.A.Text,{type:"danger",children:s.error.message})]})}}),(0,t.jsxs)("label",{children:["Descri\xe7\xe3o: ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(h.xI,{name:"description",control:c,render:e=>{let{field:r,fieldState:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.A,{...r,placeholder:"- Coca cola, R$ 5.00, 250ml."}),s.error&&(0,t.jsx)(g.A.Text,{type:"danger",children:s.error.message})]})}}),(0,t.jsx)("div",{className:"w-full flex justify-end gap-2",children:(0,t.jsx)(n.Ay,{variant:"solid",htmlType:"submit",color:"primary",shape:"default",loading:x,icon:(0,t.jsx)(b.A,{}),children:"Criar"})})]})})};function Y(){let e=(0,l.GV)(e=>e.client),[r,s]=(0,w.useState)(!1),o="text-primary",{data:c,isError:d,isFetching:m}=p(e.id,{retry:1});return(0,t.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,t.jsxs)("header",{className:"relative text-[1.125rem] pl-3",children:["Aqui voc\xea pode passar informa\xe7\xf5es sobre o",(0,t.jsx)("span",{className:o,children:" estabelecimento"}),",",(0,t.jsx)("span",{className:o,children:" produtos"}),",",(0,t.jsx)("span",{className:o,children:" servi\xe7os"})," ou o que achar necess\xe1rio",(0,t.jsx)("span",{className:"top-0 w-1 h-full absolute bg-primary left-0"})]}),m?(0,t.jsx)(a.A,{}):(0,t.jsxs)("div",{className:"max-w-[60rem] flex flex-col gap-[1rem]",children:[(0,t.jsx)("div",{className:"shadow-lg p-2 rounded-md flex flex-col gap-4",children:d?(0,t.jsx)(i.A,{message:"Nenhuma informa\xe7\xe3o encontrada!",type:"error"}):(0,t.jsx)(t.Fragment,{children:null==c?void 0:c.map(e=>(0,t.jsx)(T,{id:e._id,description:e.description,title:e.title},e._id))})}),(0,t.jsx)("div",{className:"w-full flex justify-end",children:(0,t.jsx)(n.Ay,{type:"primary",onClick:()=>s(!0),icon:(0,t.jsx)(b.A,{}),children:"Adicionar info"})})]}),(0,t.jsx)(F,{isOpen:r,setIsOpen:s})]})}},5181:(e,r,s)=>{"use strict";s.d(r,{AN:()=>i,KE:()=>a,ig:()=>n});var t=s(1990);let a={authCode:"",createdAt:"",id:"",messageTokens:0,telephone:"",updatedAt:""},i=(0,t.Z0)({name:"client",initialState:a,reducers:{setClient:(e,r)=>r.payload}}),{setClient:n}=i.actions;i.reducer},5370:(e,r,s)=>{Promise.resolve().then(s.bind(s,4637))},9622:(e,r,s)=>{"use strict";s.d(r,{q:()=>t});let t=new(s(7017)).E},9648:(e,r,s)=>{"use strict";s.d(r,{Ml:()=>l,jL:()=>o,GV:()=>c});var t=s(1990),a=s(4540),i=s(5181);let n=(0,t.fP)(i.AN),l=(0,t.U1)({reducer:n}),o=a.wA.withTypes(),c=a.d4.withTypes()}},e=>{var r=r=>e(e.s=r);e.O(0,[357,678,860,435,681,333,547,441,684,358],()=>r(5370)),_N_E=e.O()}]);