(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},458:(e,t,r)=>{"use strict";r.d(t,{HG:()=>s,Vm:()=>n,lm:()=>o});var a=r(9509);a.env.EVOLUTION_BASE_URL,a.env.EVOLUTION_API_KEY,a.env.MONGO_URL,a.env.WEBHOOK_SEND_MESSAGE_URL,a.env.OPEN_AI_BASE_URL,a.env.OPEN_AI_API_KEY,a.env.STRIPE_CALLBACK_URL,a.env.STRIPE_API_COMPLETE_KEY,a.env.STRIPE_PRICE_KEY;let s="AUTH_CODE_LOCAL_STORAGE_KEY",n="TELEPHONE_LOCAL_STORAGE_KEY",o={main:"#009CFF",mainLow:"#9DD9FF",red:"#FF0000"}},1390:(e,t,r)=>{"use strict";r.d(t,{Y:()=>c,n:()=>o});var a=r(458),s=r(3464),n=r(3568);let o=(e,t)=>{c.defaults.headers.common={authCode:e,telephone:t}},c=s.A.create(),i=async e=>{let{status:t}=e,r=t>=200&&t<=299;if(!r)return n.Ay.error(e.data.message||"Erro na solicita\xe7\xe3o!"),Promise.reject(!1);if(r){let t=new Set(["api/payment"]);"get"===e.config.method||t.has(e.config.url)||n.Ay.success(e.data.message||"Solicita\xe7\xe3o conclu\xedda!")}return e},l=async e=>{if(e.response){var t;let r=e.response.data.message;return(null===(t=e.config)||void 0===t?void 0:t.method)!=="get"&&n.Ay.error(r||"Erro na solicita\xe7\xe3o!"),403===e.status&&(localStorage.removeItem(a.HG),localStorage.removeItem(a.Vm),window.location.reload()),Promise.reject(e)}return n.Ay.error("".concat(e.code,": ").concat(e.message)),Promise.reject(e)};c.interceptors.response.use(i,l)},4372:(e,t,r)=>{"use strict";r.d(t,{AuthMiddleware:()=>m});var a=r(5155),s=r(2115),n=r(7065);let o=()=>(0,a.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:(0,a.jsx)("img",{className:"w-[6rem] h-[6rem] animate-upDown",src:n.default.src,alt:"robot"})});var c=r(5695),i=r(458),l=r(9648),d=r(5291),u=r(5181),h=r(1390);let m=e=>{let{children:t}=e,r=(0,c.useRouter)(),n=(0,l.jL)(),m=(0,c.usePathname)(),A=(0,l.GV)(e=>e.client),[f,p]=(0,s.useState)(!0),g=async()=>{let e=localStorage.getItem(i.HG),t=localStorage.getItem(i.Vm);if(e&&t){try{let r=(await d.u.checkClient({authCode:e,telephone:t})).data;n((0,u.ig)({id:r._id,authCode:r.authCode,createdAt:r.createdAt,messageTokens:r.messageTokens,telephone:r.telephone,updatedAt:r.createdAt})),(0,h.n)(e,t),p(!1)}catch(e){p(!1),localStorage.removeItem(i.HG),localStorage.removeItem(i.Vm),n((0,u.ig)(u.KE)),(0,h.n)("",""),r.push("/login")}return}A.id||(r.push("/login"),p(!1))};return((0,s.useEffect)(()=>{g()},[]),f||!A.id&&"/login"!==m)?(0,a.jsx)(o,{}):t}},5181:(e,t,r)=>{"use strict";r.d(t,{AN:()=>n,KE:()=>s,ig:()=>o});var a=r(1990);let s={authCode:"",createdAt:"",id:"",messageTokens:0,telephone:"",updatedAt:""},n=(0,a.Z0)({name:"client",initialState:s,reducers:{setClient:(e,t)=>t.payload}}),{setClient:o}=n.actions;n.reducer},5291:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var a=r(1390);class s{static async getQrCode(e){let t="api/client/qr-code";try{return(await a.Y.post(t,{telephone:e})).data}catch(e){throw Error(t)}}static async checkClient(e){let t="api/client";try{return(await a.Y.get(t,{params:e})).data}catch(e){throw Error(t)}}static async finishConnection(e){let t="api/client";try{await a.Y.delete(t,{data:{telephone:e}})}catch(e){throw Error(t)}}static async stopChatBot(e,t){let r="api/client/webhook";try{await a.Y.post(r,{instanceName:e,enabled:t})}catch(e){throw Error(r)}}static async getWebhookStatus(e){let t="api/client/webhook/".concat(e);try{return(await a.Y.get(t)).data.data.enabled}catch(e){throw Error(t)}}}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7065:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a={src:"/_next/static/media/robot.e541ec07.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEVMaXGi4vVXU5564/uc3fFKbrXI5fImSapq1fYzWbJWgMJgdcBR2P48csIWxP5CwfxBxfNLWKI/tvRAa7un5PlLdruqztnM2dtGs/Gq4fUOrvcbzf9feb+w7flgesDQ7fNov/e19/959P8+4/8X0HWLAAAAIHRSTlMA9jKu8GX9FukK/Ji0/Kv7FmGth6x5+/u9u7S4uPe3/oCQWgcAAAAJcEhZcwAAOw4AADsOAcy2oYMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAARUlEQVR4nBXIxRHAMBAEsDX7zA4z9t9jJnoKoE7axgDo9ThcLQAzMzv9o0RYFwVwd58sRw7vdi1z9NiqeN5UDxBKSAX0AWh1AyCyt5mZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},7090:(e,t,r)=>{"use strict";r.d(t,{AdditionalProviders:()=>O});var a=r(5155),s=r(9648),n=r(458),o=r(8799),c=r(3568),i=r(7065),l=r(490),d=r(5841),u=r(9630),h=r(2115);let m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"};var A=r(2764),f=h.forwardRef(function(e,t){return h.createElement(A.A,(0,u.A)({},e,{ref:t,icon:m}))}),p=r(2638);let g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"};var w=h.forwardRef(function(e,t){return h.createElement(A.A,(0,u.A)({},e,{ref:t,icon:g}))}),v=r(5291),x=r(5695);let E=e=>{let{pathname:t,text:r,icon:s}=e,n=(0,x.usePathname)(),o=(0,x.useRouter)(),c=n===t;return(0,a.jsxs)("div",{className:"\n    cursor-pointer p-[0.3px] px-[5px] flex items-center gap-1 m-0\n    rounded-md text-[14px] text-white whitespace-nowrap\n    ".concat(c?"bg-white !text-primary font-medium":"","\n    "),onClick:()=>o.push(t),children:[s,(0,a.jsx)("span",{className:"mt-[-2px]",children:r})]})},y=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),b=e=>{let t=C(e);return t.charAt(0).toUpperCase()+t.slice(1)},j=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var _={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let S=(0,h.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:o="",children:c,iconNode:i,...l}=e;return(0,h.createElement)("svg",{ref:t,..._,width:a,height:a,stroke:r,strokeWidth:n?24*Number(s)/Number(a):s,className:j("lucide",o),...l},[...i.map(e=>{let[t,r]=e;return(0,h.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),k=(e,t)=>{let r=(0,h.forwardRef)((r,a)=>{let{className:s,...n}=r;return(0,h.createElement)(S,{ref:a,iconNode:t,className:j("lucide-".concat(y(b(e))),"lucide-".concat(e),s),...n})});return r.displayName=b(e),r},N=k("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),P=k("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),R=()=>{let e=(0,s.GV)(e=>e.client),[t,r]=(0,h.useState)(!1),[n,o]=(0,h.useState)(!1),[c,u]=(0,h.useState)(!1),[m,A]=(0,h.useState)(!1),g=async()=>{try{r(!0),await v.u.finishConnection(e.telephone),r(!1),window.location.reload()}catch(e){r(!1)}},x=async()=>{try{o(!0),await v.u.stopChatBot(e.telephone,!c),y(),o(!1)}catch(e){o(!1)}},y=async()=>{try{A(!0);let t=await v.u.getWebhookStatus(e.telephone);A(!1),u(t)}catch(e){throw A(!1),Error("Error on try get webhook info!")}};return(0,h.useEffect)(()=>{y()},[]),(0,a.jsxs)("div",{className:"fixed left-0 top-0 right-0 h-[4rem] bg-gradient-menu z-10 p-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-3 h-fit items-center text-white font-bold ml-2",children:[(0,a.jsx)("img",{className:"w-[2.5rem] h-[2.5rem]",src:i.default.src,alt:"robot"}),(0,a.jsx)("h3",{children:"Atendente bot"})]}),(0,a.jsxs)("div",{className:"flex items-center mr-2 text-white gap-3",children:["Tokens: ",e.messageTokens||0,(0,a.jsx)(l.A,{title:c?"Parar ChatBot":"Iniciar ChatBot",children:(0,a.jsx)(d.Ay,{onClick:x,loading:n||m,shape:"default",icon:c?(0,a.jsx)(f,{}):(0,a.jsx)(p.A,{})})}),(0,a.jsx)(l.A,{title:"Desconectar",children:(0,a.jsx)(d.Ay,{onClick:g,loading:t,shape:"default",icon:(0,a.jsx)(w,{})})})]}),(0,a.jsxs)("div",{className:"absolute w-full min-h-[2rem] bg-primaryLow left-0 right-0 top-[4rem] p-1 flex gap-1.5 items-center overflow-x-auto",children:[(0,a.jsx)(E,{pathname:"/",text:"Informa\xe7\xf5es",icon:(0,a.jsx)(N,{size:14})}),(0,a.jsx)(E,{pathname:"/comprar-tokens",text:"Comprar tokens",icon:(0,a.jsx)(P,{size:14})})]})]})};var L=r(6715),I=r(9622);let O=e=>{let{children:t}=e,r=(0,s.GV)(e=>e.client);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.l$,{position:"bottom-center",reverseOrder:!1}),r.id&&(0,a.jsx)(R,{}),(0,a.jsx)(o.Ay,{theme:{components:{Button:{colorPrimary:n.lm.main,dangerColor:n.lm.red,fontFamily:"BreeSerif"}}},children:(0,a.jsx)(L.Ht,{client:I.q,children:t})})]})}},7910:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),s=r(4540),n=r(9648);function o(e){let{children:t}=e;return(0,a.jsx)(s.Kq,{store:n.Ml,children:t})}},8700:(e,t,r)=>{Promise.resolve().then(r.bind(r,7090)),Promise.resolve().then(r.bind(r,4372)),Promise.resolve().then(r.bind(r,7910)),Promise.resolve().then(r.t.bind(r,347,23))},9622:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});let a=new(r(7017)).E},9648:(e,t,r)=>{"use strict";r.d(t,{Ml:()=>c,jL:()=>i,GV:()=>l});var a=r(1990),s=r(4540),n=r(5181);let o=(0,a.fP)(n.AN),c=(0,a.U1)({reducer:o}),i=s.wA.withTypes(),l=s.d4.withTypes()}},e=>{var t=t=>e(e.s=t);e.O(0,[690,357,678,860,681,441,684,358],()=>t(8700)),_N_E=e.O()}]);