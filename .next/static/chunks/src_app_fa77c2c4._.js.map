{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/helpers/index.ts"],"sourcesContent":["import { AUTH_CODE_LOCAL_STORAGE_KEY, TELEPHONE_LOCAL_STORAGE_KEY } from '@/constants';\nimport { AuthService } from '../services/auth';\nimport { AuthServiceCheckClientResponse } from '../services/auth/interfaces';\nimport { storeRedux } from '../configs/redux/store';\nimport { initialStateClientReduxState, setClient } from '../configs/redux/slices/clientSlice';\nimport { setAuthorizationMetadata } from '../configs/axios';\n\nexport const setClientGlobalStateRedux = async () => {\n  const authCode = localStorage.getItem(AUTH_CODE_LOCAL_STORAGE_KEY);\n  const telephone = localStorage.getItem(TELEPHONE_LOCAL_STORAGE_KEY);\n\n  if (!authCode || !telephone) return;\n\n  try {\n    const client: AuthServiceCheckClientResponse = (await AuthService.checkClient({ telephone, authCode })).data;\n    storeRedux.dispatch(setClient({\n      id: client._id,\n      authCode: client.authCode,\n      createdAt: client.createdAt,\n      messageTokens: client.messageTokens,\n      telephone: client.telephone,\n      updatedAt: client.createdAt\n    }));\n    setAuthorizationMetadata(authCode, telephone);\n  } catch {\n    localStorage.removeItem(AUTH_CODE_LOCAL_STORAGE_KEY);\n    localStorage.removeItem(TELEPHONE_LOCAL_STORAGE_KEY);\n    storeRedux.dispatch(setClient(initialStateClientReduxState));\n    setAuthorizationMetadata('', '');\n  }\n};\n\nexport const removePhoneFormatting = (telefone: string): string => {\n  return telefone.replace(/\\D/g, '');\n};"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;AACA;;;;;;AAEO,MAAM,4BAA4B;IACvC,MAAM,WAAW,aAAa,OAAO,CAAC,mHAAA,CAAA,8BAA2B;IACjE,MAAM,YAAY,aAAa,OAAO,CAAC,mHAAA,CAAA,8BAA2B;IAElE,IAAI,CAAC,YAAY,CAAC,WAAW;IAE7B,IAAI;QACF,MAAM,SAAyC,CAAC,MAAM,0IAAA,CAAA,cAAW,CAAC,WAAW,CAAC;YAAE;YAAW;QAAS,EAAE,EAAE,IAAI;QAC5G,0IAAA,CAAA,aAAU,CAAC,QAAQ,CAAC,CAAA,GAAA,0JAAA,CAAA,YAAS,AAAD,EAAE;YAC5B,IAAI,OAAO,GAAG;YACd,UAAU,OAAO,QAAQ;YACzB,WAAW,OAAO,SAAS;YAC3B,eAAe,OAAO,aAAa;YACnC,WAAW,OAAO,SAAS;YAC3B,WAAW,OAAO,SAAS;QAC7B;QACA,CAAA,GAAA,0IAAA,CAAA,2BAAwB,AAAD,EAAE,UAAU;IACrC,EAAE,OAAM;QACN,aAAa,UAAU,CAAC,mHAAA,CAAA,8BAA2B;QACnD,aAAa,UAAU,CAAC,mHAAA,CAAA,8BAA2B;QACnD,0IAAA,CAAA,aAAU,CAAC,QAAQ,CAAC,CAAA,GAAA,0JAAA,CAAA,YAAS,AAAD,EAAE,0JAAA,CAAA,+BAA4B;QAC1D,CAAA,GAAA,0IAAA,CAAA,2BAAwB,AAAD,EAAE,IAAI;IAC/B;AACF;AAEO,MAAM,wBAAwB,CAAC;IACpC,OAAO,SAAS,OAAO,CAAC,OAAO;AACjC","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/login/components/login-form/login-form.tsx"],"sourcesContent":["'use client';\n\nimport { removePhoneFormatting, setClientGlobalStateRedux } from '@/app/helpers';\nimport { AuthService } from '@/app/services/auth';\nimport { AUTH_CODE_LOCAL_STORAGE_KEY, TELEPHONE_LOCAL_STORAGE_KEY } from '@/constants';\nimport { Button, Input } from 'antd';\nimport { formatTelephone } from 'frutils.js';\nimport { useRouter } from 'next/navigation';\nimport { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport QRCode from 'react-qr-code';\n\nexport const LoginForm = () => {\n  const navigate = useRouter();\n  const [inputTelephoneText, setInputTelephoneText] = useState<string>('');\n  const [qrCode, setQrCode] = useState<string>('');\n  const [pairingCode, setPairingCode] = useState<string>('');\n  const [authCode, setAuthCode] = useState<string>('');\n  const [isLoadingGetCodes, setIsLoadingGetCodes] = useState<boolean>(false);\n  const [isLoadingValidateConnection, setIsLoadingValidateConnection] = useState<boolean>(false);\n\n  const hasCodes = qrCode.length > 0 && pairingCode.length > 0;\n\n  const getQrCode = async () => {\n    const normalizedTelephone = `55${removePhoneFormatting(inputTelephoneText)}`;\n    if (normalizedTelephone.length < 13) {\n      toast.error('Insira um número válido!');\n      return;\n    }\n\n    try {\n      setIsLoadingGetCodes(true);\n      const response = await AuthService.getQrCode(normalizedTelephone);\n      setIsLoadingGetCodes(false);\n      setQrCode(response.data.code);\n      setPairingCode(response.data.pairingConde);\n      setAuthCode(response.data.authCode);\n\n    } catch {\n      setIsLoadingGetCodes(false);\n    }\n  };\n\n  const checkClient = async () => {\n    try {\n      const normalizedTelephone = `55${removePhoneFormatting(inputTelephoneText)}`;\n      setIsLoadingValidateConnection(true);\n      await AuthService.checkClient({ authCode, telephone: normalizedTelephone });\n      setIsLoadingValidateConnection(false);\n\n      localStorage.setItem(AUTH_CODE_LOCAL_STORAGE_KEY, authCode);\n      localStorage.setItem(TELEPHONE_LOCAL_STORAGE_KEY, normalizedTelephone);\n        \n      await setClientGlobalStateRedux();\n      navigate.push('/');\n    } catch {\n      toast.error('A conexão ainda não foi estabelecida!');\n    }\n  };\n\n  return <div className='flex flex-col gap-5'>\n    {\n      !hasCodes ?\n        <>\n          <div className='flex flex-col gap-1.5'>\n            <span>Insira o seu número do zap e comece a usar!</span>\n            <Input \n              value={inputTelephoneText} \n              onChange={event => setInputTelephoneText(formatTelephone(event.target.value))} \n              placeholder='(00) 00000-0000'\n            />\n          </div>\n          <Button \n            type=\"primary\" \n            color='primary'\n            loading={isLoadingGetCodes}\n            onClick={getQrCode}\n          >\n            Iniciar conexão\n          </Button>\n        </> : \n        <div className='w-full flex flex-col items-center gap-4'>\n          <QRCode\n            style={{ height: '10rem', width: '10rem' }}\n            value={qrCode}\n          />\n          <Button \n            className='w-full'\n            type=\"primary\" \n            color='primary'\n            loading={isLoadingValidateConnection}\n            onClick={checkClient}\n          >\n            Validar conexão\n          </Button>\n          <Button \n            className='w-full'\n            onClick={() => window.location.reload()}\n          >\n            Cancelar\n          </Button>\n        </div>\n    }\n  </div>;\n};"],"names":[],"mappings":"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","debugId":null}}]
}