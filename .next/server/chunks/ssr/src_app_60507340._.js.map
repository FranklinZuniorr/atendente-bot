{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/helpers/react-query.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useInfiniteQuery, useMutation, useQuery } from '@tanstack/react-query';\nimport type {\n  UseMutationOptions,\n  UseQueryOptions,\n  DefinedInitialDataInfiniteOptions,\n} from '@tanstack/react-query';\n\nexport const generateReactQuery = <TReturnData, TFilter>(\n  queryKey: string,\n  fn: (filter: TFilter) => Promise<TReturnData>,\n) => {\n  return (\n    params: TFilter,\n    options?: Omit<UseQueryOptions<TReturnData, Error, TReturnData, [string, TFilter]>, 'queryKey' | 'queryFn'>,\n  ) => {\n    return useQuery<TReturnData, Error, TReturnData, [string, TFilter]>({\n      ...options,\n      queryKey: [queryKey, params],\n      queryFn: () => fn(params),\n    });\n  };\n};\n\nexport const generateReactQueryMutation = <TReturnData = void, TFilter = void>(\n  queryKey: string,\n  fn: (filter: TFilter) => Promise<TReturnData> | void,\n) => {\n  return (\n    options?: Omit<UseMutationOptions<TReturnData, Error, TFilter>, 'mutationKey' | 'mutationFn'>,\n  ) => {\n    return useMutation<TReturnData, Error, TFilter>({\n      ...options,\n      mutationKey: [queryKey],\n      mutationFn: (event: TFilter) => fn(event) as Promise<TReturnData>,\n    });\n  };\n};\n\nexport const generateReactQueryInfinityScroll = <\n  TReturnData = void,\n  TFilter = void,\n  TReactQueryPageParam = any\n>(\n    queryKey: string,\n    fn: (\n    filter: TFilter,\n    reactQueryPageParam: TReactQueryPageParam,\n  ) => Promise<TReturnData>,\n  ) => {\n  return (\n    params: TFilter,\n    options?: Omit<\n      DefinedInitialDataInfiniteOptions<TReturnData, Error, TReturnData, [string, TFilter]>,\n      'queryKey' | 'queryFn'\n    >,\n  ) => {\n    return useInfiniteQuery<TReturnData, Error, TReturnData, [string, TFilter]>({\n      ...options,\n      queryKey: [queryKey, params],\n      queryFn: ({ pageParam }) => {\n        const normalizedPageParam: TReactQueryPageParam = pageParam as TReactQueryPageParam;\n        return fn(params, normalizedPageParam);\n      },\n      initialPageParam: undefined,\n      getNextPageParam: () => null,\n    });\n  };\n};"],"names":[],"mappings":"AAAA,qDAAqD;;;;;AACrD;AAAA;AAAA;;AAOO,MAAM,qBAAqB,CAChC,UACA;IAEA,OAAO,CACL,QACA;QAEA,OAAO,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD,EAAsD;YAClE,GAAG,OAAO;YACV,UAAU;gBAAC;gBAAU;aAAO;YAC5B,SAAS,IAAM,GAAG;QACpB;IACF;AACF;AAEO,MAAM,6BAA6B,CACxC,UACA;IAEA,OAAO,CACL;QAEA,OAAO,CAAA,GAAA,8KAAA,CAAA,cAAW,AAAD,EAA+B;YAC9C,GAAG,OAAO;YACV,aAAa;gBAAC;aAAS;YACvB,YAAY,CAAC,QAAmB,GAAG;QACrC;IACF;AACF;AAEO,MAAM,mCAAmC,CAK5C,UACA;IAKF,OAAO,CACL,QACA;QAKA,OAAO,CAAA,GAAA,mLAAA,CAAA,mBAAgB,AAAD,EAAsD;YAC1E,GAAG,OAAO;YACV,UAAU;gBAAC;gBAAU;aAAO;YAC5B,SAAS,CAAC,EAAE,SAAS,EAAE;gBACrB,MAAM,sBAA4C;gBAClD,OAAO,GAAG,QAAQ;YACpB;YACA,kBAAkB;YAClB,kBAAkB,IAAM;QAC1B;IACF;AACF","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/query-api/get-messages-history.ts"],"sourcesContent":["import { HttpClientApi } from '@/app/configs/axios';\nimport { queryClient } from '@/app/configs/react-query';\nimport { generateReactQuery } from '@/app/helpers/react-query';\n\nexport const KEY_GET_MESSAGES_HISTORY = 'KEY_GET_MESSAGES_HISTORY';\n\ninterface GetMessagesHistoryReturn {\n    data: {\n        user: string;\n        receivedMessage: string;\n        replyMessage: string;\n        createdAt: string;\n    }[]\n}\n\nexport const invalidateGetMessagesHistory = (clientId: string) => {\n  if (clientId) {\n    queryClient.invalidateQueries({ queryKey: [KEY_GET_MESSAGES_HISTORY, clientId] });\n  } else {\n    queryClient.invalidateQueries({ queryKey: [KEY_GET_MESSAGES_HISTORY] });\n  }\n};\n\nconst getMessagesHistory = async (clientId: string): Promise<GetMessagesHistoryReturn> => {\n  const path: string = `api/client/messages-history/${clientId}`;\n\n  try {\n    const response: GetMessagesHistoryReturn = (await HttpClientApi.get(path)).data;\n\n    return response;\n  } catch {\n    throw new Error(path);\n  }\n};\n\nexport const useGetMessagesHistory = generateReactQuery<GetMessagesHistoryReturn, string>(KEY_GET_MESSAGES_HISTORY, getMessagesHistory);"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,2BAA2B;AAWjC,MAAM,+BAA+B,CAAC;IAC3C,IAAI,UAAU;QACZ,gJAAA,CAAA,cAAW,CAAC,iBAAiB,CAAC;YAAE,UAAU;gBAAC;gBAA0B;aAAS;QAAC;IACjF,OAAO;QACL,gJAAA,CAAA,cAAW,CAAC,iBAAiB,CAAC;YAAE,UAAU;gBAAC;aAAyB;QAAC;IACvE;AACF;AAEA,MAAM,qBAAqB,OAAO;IAChC,MAAM,OAAe,CAAC,4BAA4B,EAAE,UAAU;IAE9D,IAAI;QACF,MAAM,WAAqC,CAAC,MAAM,uIAAA,CAAA,gBAAa,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI;QAE/E,OAAO;IACT,EAAE,OAAM;QACN,MAAM,IAAI,MAAM;IAClB;AACF;AAEO,MAAM,wBAAwB,CAAA,GAAA,uIAAA,CAAA,qBAAkB,AAAD,EAAoC,0BAA0B","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/card-message/card-message.tsx"],"sourcesContent":["import dayjs from 'dayjs';\n\ninterface Message {\n    user: string;\n    receivedMessage: string;\n    replyMessage: string;\n    createdAt: string;\n}\n\ninterface CardMessageProps {\n    message: Message;\n}\n\nexport const CardMessage = ({ \n  message\n}: CardMessageProps) => {\n  const stylesDivMessage = 'w-full flex';\n  return <div className={`\n    relative flex flex-col w-full h-fit border border-primaryLow rounded-md p-4 overflow-hidden\n  `}>\n    <div className='absolute right-0 top-0 p-2 bg-primaryLow rounded-bl-lg'>\n      {dayjs(message.createdAt).format('DD/MM/YYYY HH:mm')}\n    </div>\n    <div className={`${stylesDivMessage} justify-start`}>\n      <div className=\"flex flex-col gap-1.5 w-fit rounded-lg max-w-[50%] max-md:max-w-[100%]\">\n        <strong>{message.user}</strong>\n        <div className='p-2 bg-gray-200 rounded-lg w-fit whitespace-pre-line'>{message.receivedMessage}</div>\n      </div>\n    </div>\n    <div className={`${stylesDivMessage} justify-end`}>\n      <div className=\"flex flex-col gap-1.5 w-fit items-end text-right max-w-[50%] max-md:max-w-[100%]\">\n        <strong>Resposta da IA</strong>\n        <div className='p-2 rounded-lg bg-gray-200 w-fit whitespace-pre-line'>{message.replyMessage}</div>\n      </div>\n    </div>\n  </div>;\n};"],"names":[],"mappings":";;;;AAAA;;;AAaO,MAAM,cAAc,CAAC,EAC1B,OAAO,EACU;IACjB,MAAM,mBAAmB;IACzB,qBAAO,8OAAC;QAAI,WAAW,CAAC;;EAExB,CAAC;;0BACC,8OAAC;gBAAI,WAAU;0BACZ,CAAA,GAAA,qIAAA,CAAA,UAAK,AAAD,EAAE,QAAQ,SAAS,EAAE,MAAM,CAAC;;;;;;0BAEnC,8OAAC;gBAAI,WAAW,GAAG,iBAAiB,cAAc,CAAC;0BACjD,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAQ,QAAQ,IAAI;;;;;;sCACrB,8OAAC;4BAAI,WAAU;sCAAwD,QAAQ,eAAe;;;;;;;;;;;;;;;;;0BAGlG,8OAAC;gBAAI,WAAW,GAAG,iBAAiB,YAAY,CAAC;0BAC/C,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAO;;;;;;sCACR,8OAAC;4BAAI,WAAU;sCAAwD,QAAQ,YAAY;;;;;;;;;;;;;;;;;;;;;;;AAInG","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/header-users/header-users.tsx"],"sourcesContent":["'use client';\n\ninterface HeaderUsersProps {\n    users: string[];\n    selectedUser: string;\n    onChange:  (user: string) => void\n}\n\nexport const HeaderUsers = ({ users, selectedUser, onChange }: HeaderUsersProps) => {\n\n  const handleOnChange = (user: string) => {\n    if (selectedUser === user) {\n      onChange('');\n      return;\n    };\n\n    onChange(user);\n  };\n\n  return <div className=\"w-full flex flex-col gap-1\">\n    {\n      users.length > 0 ?\n        <>\n          <span className=\"text-gray-500\">Filtro por usu√°rios:</span>\n          <div className='w-full bg-gray-200 px-2 rounded-md min-h-fit gap-2 flex overflow-x-auto'>\n            {\n              users.map(user => \n                <div \n                  key={user} \n                  className={\n                    `\n                    ${selectedUser === user ? 'text-primary' : 'text-gray-500 underline-offset-1 underline'} \n                    cursor-pointer text-[0.875rem]\n                `\n                  }\n                  onClick={() => handleOnChange(user)}\n                >\n                  {user}\n                </div>\n              )\n            }\n          </div> \n        </>\n        : null\n    }\n  </div> ;\n};"],"names":[],"mappings":";;;;AAAA;;AAQO,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,QAAQ,EAAoB;IAE7E,MAAM,iBAAiB,CAAC;QACtB,IAAI,iBAAiB,MAAM;YACzB,SAAS;YACT;QACF;;QAEA,SAAS;IACX;IAEA,qBAAO,8OAAC;QAAI,WAAU;kBAElB,MAAM,MAAM,GAAG,kBACb;;8BACE,8OAAC;oBAAK,WAAU;8BAAgB;;;;;;8BAChC,8OAAC;oBAAI,WAAU;8BAEX,MAAM,GAAG,CAAC,CAAA,qBACR,8OAAC;4BAEC,WACE,CAAC;oBACD,EAAE,iBAAiB,OAAO,iBAAiB,6CAA6C;;gBAE5F,CAAC;4BAEC,SAAS,IAAM,eAAe;sCAE7B;2BATI;;;;;;;;;;;2BAeb;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///home/fr/atendente-bot/src/app/msgs/components/content-msgs/content-msgs.tsx"],"sourcesContent":["'use client';\n\nimport { useAppSelector } from '@/app/configs/redux/store';\nimport { useGetMessagesHistory } from '../../query-api/get-messages-history';\nimport { CardMessage } from '../card-message';\nimport { Alert, Skeleton } from 'antd';\nimport { HeaderUsers } from '../header-users';\nimport { useState } from 'react';\n\nexport const ContentMsgs = () => {\n  const client = useAppSelector(state => state.client);\n  const [selectedUserFilter, setSelectedUserFilter] = useState<string>('');\n\n  const { \n    data: dataGetMessagesHistory, \n    isFetching: isFetchingGetMessagesHistory,\n    isError: isErrorGetMessagesHistory\n  } = \n  useGetMessagesHistory(client.id, {\n    retry: 2,\n    refetchOnWindowFocus: true,\n    refetchInterval: 1000 * 60\n  });\n\n  const normalizedDataGetMessagesHistory = selectedUserFilter ? \n    dataGetMessagesHistory?.data.filter(message => message.user === selectedUserFilter) || [] : \n    dataGetMessagesHistory?.data || [];\n  const reversedMessages = [...normalizedDataGetMessagesHistory].reverse();\n  const allUsers: Set<string> = new Set(normalizedDataGetMessagesHistory.map(message => message.user));\n\n  return <div className=\"flex flex-col gap-4 w-full shadow-lg p-2 rounded-b-md\">\n    <HeaderUsers \n      users={[...allUsers]} \n      selectedUser={selectedUserFilter} \n      onChange={user => setSelectedUserFilter(user)}\n    />\n    <div>\n      Total de mensagens: {dataGetMessagesHistory?.data.length || 0}\n    </div>\n    {\n      isFetchingGetMessagesHistory ? <Skeleton /> :\n        <>\n          {\n            isErrorGetMessagesHistory ? \n              <Alert className='max-w-[20rem]' message=\"Nenhuma mensagem encontrada!\" type=\"error\" /> :\n              <>\n                {\n                  reversedMessages.map((message, index) => (\n                    <CardMessage key={index} message={message} />\n                  ))\n                }\n              </>\n          }\n        </>\n    }\n  </div>;\n};"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAPA;;;;;;;;AASO,MAAM,cAAc;IACzB,MAAM,SAAS,CAAA,GAAA,uIAAA,CAAA,iBAAc,AAAD,EAAE,CAAA,QAAS,MAAM,MAAM;IACnD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAErE,MAAM,EACJ,MAAM,sBAAsB,EAC5B,YAAY,4BAA4B,EACxC,SAAS,yBAAyB,EACnC,GACD,CAAA,GAAA,gKAAA,CAAA,wBAAqB,AAAD,EAAE,OAAO,EAAE,EAAE;QAC/B,OAAO;QACP,sBAAsB;QACtB,iBAAiB,OAAO;IAC1B;IAEA,MAAM,mCAAmC,qBACvC,wBAAwB,KAAK,OAAO,CAAA,UAAW,QAAQ,IAAI,KAAK,uBAAuB,EAAE,GACzF,wBAAwB,QAAQ,EAAE;IACpC,MAAM,mBAAmB;WAAI;KAAiC,CAAC,OAAO;IACtE,MAAM,WAAwB,IAAI,IAAI,iCAAiC,GAAG,CAAC,CAAA,UAAW,QAAQ,IAAI;IAElG,qBAAO,8OAAC;QAAI,WAAU;;0BACpB,8OAAC,uKAAA,CAAA,cAAW;gBACV,OAAO;uBAAI;iBAAS;gBACpB,cAAc;gBACd,UAAU,CAAA,OAAQ,sBAAsB;;;;;;0BAE1C,8OAAC;;oBAAI;oBACkB,wBAAwB,KAAK,UAAU;;;;;;;YAG5D,6CAA+B,8OAAC,sLAAA,CAAA,WAAQ;;;;qCACtC;0BAEI,0CACE,8OAAC,gLAAA,CAAA,QAAK;oBAAC,WAAU;oBAAgB,SAAQ;oBAA+B,MAAK;;;;;yCAC7E;8BAEI,iBAAiB,GAAG,CAAC,CAAC,SAAS,sBAC7B,8OAAC,uKAAA,CAAA,cAAW;4BAAa,SAAS;2BAAhB;;;;;;;;;;;;;AAQtC","debugId":null}}]
}